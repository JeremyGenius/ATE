if('serviceWorker'in navigator){let registration;const registerServiceWorker=async()=>{registration=await navigator.serviceWorker.register('sw.js')};registerServiceWorker()}var menu=document.getElementsByClassName('menu-background')[0];document.getElementsByClassName('menu-button')[0].addEventListener('click',function(){menu.style.display='block'});document.getElementsByClassName('close-menu-button')[0].addEventListener('click',function(){menu.style.display='none'});window.onclick=function(event){if(event.target==menu){menu.style.display="none"}};var icon=document.getElementsByClassName('icon');var menubarBackground=document.getElementsByClassName('menubar-background')[0];var menuBox=document.getElementsByClassName('menu-box')[0];var menuActionButton=document.getElementsByClassName('menu-action-button');document.getElementsByClassName('change-theme-button')[0].addEventListener('click',function(){if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.toggle('dark-theme');for(var i=0;i<icon.length;i+=1){icon[i].classList.toggle('dark-theme')}menubarBackground.classList.toggle('dark-theme');menuBox.classList.toggle('dark-theme');for(var i=0;i<menuActionButton.length;i+=1){menuActionButton[i].classList.toggle('dark-theme')}}else{document.body.classList.toggle('dark-theme');for(var i=0;i<icon.length;i+=1){icon[i].classList.toggle('dark-theme')}menubarBackground.classList.toggle('dark-theme');menuBox.classList.toggle('dark-theme');for(var i=0;i<menuActionButton.length;i+=1){menuActionButton[i].classList.toggle('dark-theme')}}});document.getElementsByClassName('import-file-button')[0].addEventListener('click',function(){var element=document.createElement('input');element.setAttribute('type','file');element.setAttribute('accept','.txt,.md,.markdown');element.style.display='none';element.click();element.addEventListener('change',function(){var fr=new FileReader();fr.onload=function(){document.getElementsByClassName('text-field')[0].innerText=fr.result};fr.readAsText(this.files[0]);menu.style.display="none"});element.remove()});function downloadFile(filename,text){var element=document.createElement('a');element.setAttribute('href','data:text/plain;charset=utf-8,'+encodeURIComponent(text));element.setAttribute('download',filename);element.style.display='none';element.click();element.remove()}document.getElementsByClassName('export-file-button')[0].addEventListener('click',function(){var text=document.getElementsByClassName('text-field')[0].innerText;var filename='text.txt';downloadFile(filename,text);menu.style.display="none"});
